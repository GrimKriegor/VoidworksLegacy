#ifndef PACKET_H_
#define PACKET_H_

#include <voidworks/common.h>
#include <voidworks/packet_struct.h>
#include <voidworks/process.h>
#include <voidworks/session.h>

#define DAMAGE_DATA_SIZE 176

enum class PacketId : uint32_t;
void SendPacketSession(uint32_t, const void*, uint32_t);
void SendPacketSession(PacketId, const void*, uint32_t);
void SendPacketPlayer(uint8_t, uint32_t, const void*, uint32_t);
void SendPacketPlayer(uint8_t, PacketId, const void*, uint32_t);

class DamageInstance
{
  private:
    void (*sprjDamagePacket)(...);
    uintptr_t sprjDebugPacketManager;
    void WriteDamageDataBlock();
    uint8_t damage_data_[DAMAGE_DATA_SIZE] = {
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
  public:
    uint32_t id     = 0;
    uint16_t base   = 0;
    float physical  = 0;
    float magic     = 0;
    float fire      = 0;
    float lightning = 0;
    float dark      = 0;
    DamageInstance();
    void SendToPlayer(uint8_t);
};

enum class PacketId : uint32_t {
  Coords              = 0x00,
  MobCoords           = 0x00,
  MobHealth           = 0x00,
  PlayerNo            = 0x00,
  PlayerStruct        = 0x00,
  SessionHandshake    = 0x00,
  TeamType            = 0x00,
  Equipment           = 0x00,
  MsgMap              = 0x00,
  CompleteEvent       = 0x00,
  CompleteEventGuest  = 0x00,
  Throw               = 0x00,
  Damage              = 0x00,
  HPDec               = 0x00,
  HostInfo            = 0x00,
  Animations          = 0x00,
  UnusedStats         = 0x00,
  WorldFlag           = 0x00,
  VFX                 = 0x00,
  EMEVDSync           = 0x00,
  Attack              = 0x00,
  Effect              = 0x00,
  AddSubSoul          = 0x00,
  SendHome            = 0x00,
  ItemDrop            = 0x00,
  Event               = 0x00,
  NPCSpawn            = 0x00,
  Bullets             = 0x00,
  MobAction           = 0x00,
  ConnectionHandshake = 0x00,
};

#endif
